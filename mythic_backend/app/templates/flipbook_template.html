<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <!-- META TAGS TO PREVENT CACHING -->
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Ваш Древний Манускрипт</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Use Google Fonts with a valid family request -->
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:wght@400;600;700&family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- Fallback: Bunny Fonts (privacy-friendly, unblocked in many regions) -->
  <link href="https://fonts.bunny.net/css?family=lora:400,700,400i|cormorant-garamond:400,600,700|cinzel:400,600,700" rel="stylesheet" media="all" onerror="this.media='all'">

  <style>
    /* === ОСНОВА "КИБЕР-МАГИЯ" === */
    html, body { 
      margin: 0; padding: 0; width: 100%; height: 100%;
      overflow: hidden;
      /* Анимированный космический фон */
      background: radial-gradient(ellipse at top, #0a0a0a 0%, #1a0a2e 50%, #16213e 100%);
      background-attachment: fixed;
      font-family: var(--font-body);
      position: relative;
    }
    
    /* Анимированные частицы в фоне */
    html::before {
      content: '';
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background-image: 
        radial-gradient(2px 2px at 20px 30px, #fff, transparent),
        radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
        radial-gradient(1px 1px at 90px 40px, #fff, transparent),
        radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
        radial-gradient(2px 2px at 160px 30px, #fff, transparent);
      background-repeat: repeat;
      background-size: 200px 100px;
      animation: sparkle 20s linear infinite;
      pointer-events: none;
      z-index: 1;
    }
    
    @keyframes sparkle {
      from { transform: translateY(0px); }
      to { transform: translateY(-100px); }
    }
    
    .flip-book-container { 
      display: flex; justify-content: center; align-items: center;
      width: 100%; height: 100%;
      perspective: 3000px;
      padding: 1em;
      z-index: 10;
      position: relative;
    }

    #book {
      transform: rotateY(-5deg) rotateX(5deg) scale(0.9);
      transform-style: preserve-3d;
      transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      filter: drop-shadow(0 20px 40px rgba(0,0,0,0.8));
    }
    #book:hover {
        transform: rotateY(0) rotateX(0) scale(0.95);
        filter: drop-shadow(0 30px 60px rgba(0,0,0,0.9));
    }
    
    /* === ЦВЕТОВАЯ ПАЛИТРА "НЕОНОВАЯ МАГИЯ" === */
    :root {
      --font-heading: 'Lora', serif;
      --font-body: 'Cormorant Garamond', serif;
      --font-ornamental: 'Cinzel', serif; /* Заменяем проблемный шрифт */
      
      --page-bg: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
      --text-color: #e8e8ff;
      --heading-color: #00ffff;
      --accent-color: #ff6b6b;
      --neon-pink: #ff0080;
      --neon-blue: #0080ff;
      --neon-green: #00ff80;
      --meta-text-color: #a0a0ff;
      --cover-bg: linear-gradient(45deg, #1a0033, #330066, #0d1421);
      --cover-text-color: #ffffff;
      --shadow-color: rgba(0, 255, 255, 0.3);
    }
    
    /* === СТРАНИЦА С НЕОНОВЫМИ ЭФФЕКТАМИ === */
    #book .page {
      background: var(--page-bg) !important;
      display: flex; flex-direction: column;
      box-sizing: border-box;
      position: relative;
      overflow: hidden;
      border: 2px solid transparent !important;
      background-clip: padding-box;
      /* Голографический эффект */
      box-shadow: 
        0 0 30px rgba(0,255,255,0.4),
        0 0 60px rgba(255,0,128,0.2),
        inset 0 0 30px rgba(0,128,255,0.1) !important;
      /* Скошенные углы */
      clip-path: polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% calc(100% - 15px), calc(100% - 15px) 100%, 15px 100%, 0 calc(100% - 15px), 0 15px);
    }
    
    /* Принудительно применяем фон к любым элементам страницы */
    .stf__item, .stf__page, [data-page] {
      background: var(--page-bg) !important;
    }
    
    /* Анимированная неоновая рамка */
    #book .page::after {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(45deg, var(--neon-pink), var(--neon-blue), var(--neon-green), var(--neon-pink));
      background-size: 400% 400%;
      animation: neonFlow 4s ease infinite;
      z-index: -1;
      filter: blur(3px);
      pointer-events: none;
    }
    
    @keyframes neonFlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    /* Внутренняя светящаяся рамка */
    #book .page::before {
      content: '';
      position: absolute;
      top: 10px; left: 10px; right: 10px; bottom: 10px;
      border: 1px solid rgba(0,255,255,0.6);
      box-shadow: 
        0 0 10px rgba(0,255,255,0.5) inset,
        0 0 20px rgba(0,255,255,0.3);
      pointer-events: none;
      z-index: 1;
      animation: pulse 3s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
    
    /* === ОБЛОЖКА === */
    .cover-page {
      background: var(--cover-bg);
      background-size: 200% 200%;
      animation: coverShift 8s ease infinite;
    }
    
    @keyframes coverShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .cover-page.page::after {
        background: linear-gradient(45deg, var(--neon-pink), gold, var(--neon-blue), var(--neon-pink));
        background-size: 300% 300%;
        animation: coverNeon 3s ease infinite;
    }
    
    @keyframes coverNeon {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .cover-page .page-content {
        color: var(--cover-text-color);
        text-shadow: 0 0 10px rgba(255,255,255,0.8), 0 0 20px var(--neon-blue);
    }
    .cover-page .book-title {
      font-family: var(--font-heading);
        font-size: 4.5em;
      font-weight: 700;
        margin: 0;
        line-height: 1.1;
        background: linear-gradient(45deg, var(--neon-pink), var(--neon-blue), var(--neon-green));
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: textShine 3s ease infinite;
      text-shadow: none;
    }
    
    @keyframes textShine {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    .cover-page .book-subtitle {
        font-size: 1.2em;
        font-style: italic;
        letter-spacing: 2px;
        text-shadow: 0 0 10px var(--neon-green);
    }
    .cover-ornament {
        font-size: 6em;
        background: linear-gradient(45deg, gold, var(--neon-pink), gold);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: ornamentGlow 2s ease infinite;
        margin: 0.3em 0;
        filter: drop-shadow(0 0 20px rgba(255,215,0,0.8));
    }
    
    @keyframes ornamentGlow {
      0%, 100% { 
        background-position: 0% 50%; 
        transform: scale(1);
      }
      50% { 
        background-position: 100% 50%; 
        transform: scale(1.1);
      }
    }
    
    /* === КОНТЕНТ СТРАНИЦЫ === */
    .page-content {
      padding: 2.5em;
      box-sizing: border-box;
      height: 100%;
      font-size: 1.1em;
      line-height: 1.6;
      color: var(--text-color);
      font-weight: 400;
      z-index: 2;
      position: relative;
      text-shadow: 0 0 5px rgba(232,232,255,0.5);
    }
    .page-content p {
         text-indent: 1.5em;
         margin: 0 0 1em 0;
    }
    .page-content p:first-of-type { text-indent: 0; }
    
    /* === ЗАГОЛОВКИ === */
    .page-content h1, .page-content h2 {
      font-family: var(--font-heading);
      font-weight: 700;
      text-align: center;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 1em;
      background: linear-gradient(45deg, var(--heading-color), var(--neon-pink), var(--heading-color));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: headerGlow 4s ease infinite;
      filter: drop-shadow(0 0 10px rgba(0,255,255,0.6));
    }
    .page-content h1 { font-size: 2.5em; }
    .page-content h2 { font-size: 2em; }
    
    @keyframes headerGlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    /* === БУКВИЦА === */
    .drop-cap p:first-child::first-letter {
      font-family: var(--font-ornamental);
      float: left;
      font-size: 5em;
      line-height: 0.8;
      margin: 0.05em 0.1em 0 0;
      background: linear-gradient(45deg, var(--accent-color), var(--neon-green), var(--accent-color));
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: letterGlow 3s ease infinite;
      filter: drop-shadow(0 0 15px rgba(255,107,107,0.8));
    }
    
    @keyframes letterGlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    /* === ИЗОБРАЖЕНИЯ === */
    .page-image-container { 
        display: flex; flex-direction: column; justify-content: center; align-items: center;
        height: 100%; padding: 2em; box-sizing: border-box;
    }
    .page-image-container img { 
      max-width: 100%; max-height: 70%;
      object-fit: cover;
      border: 3px solid transparent;
      background: linear-gradient(var(--page-bg), var(--page-bg)) padding-box,
                  linear-gradient(45deg, var(--neon-pink), var(--neon-blue), var(--neon-green)) border-box;
      border-radius: 10px;
      box-shadow: 
        0 0 30px rgba(0,255,255,0.4),
        0 0 60px rgba(255,0,128,0.3);
      transition: all 0.5s ease;
    }
    .page-image-container img:hover {
      transform: scale(1.05) rotate(1deg);
      box-shadow: 
        0 0 40px rgba(0,255,255,0.6),
        0 0 80px rgba(255,0,128,0.4);
    }
    .image-caption {
        font-size: 1em;
      color: var(--meta-text-color);
      text-align: center;
        margin-top: 1em;
        max-width: 90%;
        text-shadow: 0 0 5px rgba(160,160,255,0.5);
    }
    
    /* === АНИМАЦИИ ПОЯВЛЕНИЯ === */
    @keyframes magicAppear {
        from { 
          opacity: 0; 
          transform: translateY(20px) scale(0.9); 
          filter: blur(5px);
        }
        to { 
          opacity: 1; 
          transform: translateY(0) scale(1); 
          filter: blur(0);
    }
    }
    .page-content > * {
        animation: magicAppear 1s 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
    }

    /* === НУМЕРАЦИЯ И КОЛОНТИТУЛЫ === */
    .page-number { 
      position: absolute; bottom: 25px; 
      font-family: var(--font-body); font-size: 1em; 
      color: var(--meta-text-color); z-index: 20; 
      text-shadow: 0 0 10px var(--neon-blue);
    }
    .page-number.left { left: 30px; }
    .page-number.right { right: 30px; }
    .running-header { 
      position: absolute; top: 25px; 
      font-family: var(--font-body); font-style: italic; font-size: 0.9em; 
      color: var(--meta-text-color); z-index: 20; 
      text-shadow: 0 0 8px var(--neon-green);
    }
    .running-header.left { left: 30px; }
    .running-header.right { right: 30px; }
    
    /* === ОГЛАВЛЕНИЕ === */
    .toc-item {
      display: flex; justify-content: space-between; align-items: baseline; 
      margin-bottom: 1.2em; font-size: 1em; 
      transition: all 0.3s ease;
    }
    .toc-item:hover {
      color: var(--neon-pink);
      text-shadow: 0 0 10px var(--neon-pink);
      transform: translateX(10px);
    }
    .toc-item .leader { 
      flex-grow: 1; 
      border-bottom: 1px dotted var(--meta-text-color); 
      margin: 0 0.5em; 
    }
    .toc-item .chapter-title {
      background: transparent; 
      padding-right: 0.5em;
    }
    .toc-item .page-num {
      background: transparent; 
      padding-left: 0.5em; 
      font-weight: 700; 
      color: var(--accent-color);
      text-shadow: 0 0 5px var(--accent-color);
    }
    
    /* === СПЕЦИАЛЬНЫЕ ЭФФЕКТЫ === */
    .final-page { 
      background: var(--page-bg); 
    }
    
    /* Мерцающий текст */
    .page-content h1:hover,
    .page-content h2:hover {
      animation: flicker 0.5s ease infinite;
    }
    
    @keyframes flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
  </style>
</head>
<body>
  <div class="flip-book-container">
    <div id="book">
      <!-- 1. Обложка -->
      <div class="page cover-page">
        <div class="page-content" style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
          <div class="cover-ornament">⚜</div>
          <h1 class="book-title">{{ book_title }}</h1>
          <p class="book-subtitle">{{ book_subtitle }}</p>
        </div>
      </div>
      
      <!-- Пустой форзац -->
      <div class="page"></div>

      <!-- 2. Титульный лист -->
      <div class="page title-page">
        <div class="page-content" style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
          <h1 style="font-size: 3.5em; margin-bottom: 1em;">{{ book_title }}</h1>
          <p style="font-family: var(--font-ornamental); font-size: 1.5em; border-top: 1px solid var(--meta-text-color); border-bottom: 1px solid var(--meta-text-color); padding: 1em 0;">
            "В каждом моменте есть своя магия,<br>
            стоит лишь научиться её замечать"
          </p>
          <p style="font-size: 1.2em; margin-top: 3em;">{{ book_subtitle }}</p>
        </div>
        <div class="page-number left">1</div>
        <div class="running-header left">{{ book_title }}</div>
      </div>

      <!-- 3. Оглавление -->
      <div class="page toc-page">
        <div class="toc-content">
          <h2>{{ toc_title }}</h2>
          {% for page in pages %}
          <div class="toc-item">
            <span class="chapter-title">Глава {{ loop.index }}: {{ page.title | striptags | trim | truncate(30) }}</span>
            <span class="leader"></span>
            <span class="page-num">{{ (loop.index0 * 2) + 4 }}</span>
          </div>
          {% endfor %}
          <div class="toc-item">
            <span class="chapter-title">Эпилог</span>
             <span class="leader"></span>
            <span class="page-num">{{ (pages|length * 2) + 4 }}</span>
          </div>
          <div class="toc-item">
            <span class="chapter-title">{{ gratitude_title }}</span>
             <span class="leader"></span>
            <span class="page-num">{{ (pages|length * 2) + 5 }}</span>
          </div>
        </div>
        <div class="page-number right">2</div>
        <div class="running-header right">{{ toc_title }}</div>
      </div>

      <!-- 4. Введение -->
      <div class="page">
        <div class="page-content two-column">
          <span class="section-icon intro-icon"></span>
          <h2>{{ intro_title }}</h2>
          <hr class="chapter-separator">
          <div class="drop-cap">
            <p>Каждая история начинается с одного момента, одного взгляда, одного слова. Эта книга — собрание таких моментов, каждый из которых стал частью большего повествования о любви, дружбе и жизни.</p>
          </div>
          
          <div class="pull-quote">
            Лучшие истории пишутся не пером, а сердцем
          </div>
          
          <p>В этих страницах вы найдёте не просто фотографии и слова, а кусочки души, запечатлённые в моментах счастья, размышлений и открытий. Каждая глава — это шаг в путешествии, которое продолжается и сегодня.</p>
          
          <p>Позвольте себе погрузиться в эту историю, прочувствовать каждый момент и, возможно, найти что-то знакомое в этих строках — что-то, что отзовётся в вашем собственном сердце.</p>
        </div>
        <div class="page-number left">3</div>
        <div class="running-header left">{{ intro_title }}</div>
      </div>

      <!-- 5. Развороты: Текст слева, Картинка справа -->
      {% for page in pages %}
        <!-- Левая страница - Текст -->
        <div class="page">
          <div class="page-content two-column">
            
            <!-- Эпиграф для каждой главы -->
            <div class="chapter-epigraph">
              {% if loop.index == 1 %}
              Стена — не граница, а дверь в новый мир.
              {% elif loop.index == 2 %}
              В каждом моменте скрыта вечность.
              {% elif loop.index == 3 %}
              Путь к мечте начинается с одного шага.
              {% elif loop.index == 4 %}
              Звёзды ближе, чем кажется.
              {% elif loop.index == 5 %}
              Будущее создаётся сегодня.
              {% else %}
              Каждая история — это часть великого повествования.
              {% endif %}
            </div>
            
            <h2>Глава {{ loop.index }}{% if loop.index == 1 %}. Шаги, что ведут к звёздам{% endif %}</h2>
            <hr class="chapter-separator">
            
            {% if loop.first %}
            <div class="drop-cap">
              <p>Ты чувствуешь, как каменная кладка стены шепчет тебе: «Добро пожаловать в мир, который соткан из твоих идей». {{ page.text | safe | replace('Ты стоишь перед кирпичной стеной.', '') | replace('Beknur, словно воплощение мечты, которая только начинает становиться реальностью.', 'Beknur — больше чем пространство, это алхимия амбиций, где каждый кирпич словно строительный блок твоих будущих свершений.') | replace('Взгляд — уверенный, в нём горят искры.', 'Взгляд твой переливается огненным светом — искры дерзости, готовые запустить цепную реакцию перемен.') }}</p>
            </div>
            
            <div class="pull-quote">
              Каждый шаг — это секретная формула, которая меняет мир
            </div>
            
            <p>Ты вдохнул вечерний воздух и шагнул навстречу неизвестности, чувствуя, как кровь закипает от предвкушения новых открытий. Каждая вибрация под ногами — словно отголосок твоих амбиций, готовых прорваться наружу.</p>
            
            <p>Beknur оказался твоей площадкой для экспериментов: стены, пропитанные историями наставлений, и свет ламп, обрамляющий твои идеи, словно прожекторы на сцене твоего будущего. Взгляд твой — это вспышка энтузиазма, которой достаточно, чтобы зажечь огонь перемен.</p>
            {% else %}
            <div class="drop-cap">
              <p>{{ page.text | safe }}</p>
            </div>
            {% endif %}
            
            {% if loop.index % 3 == 0 %}
            <div class="pull-quote">
              Каждый момент уникален и неповторим, как отпечаток души на холсте времени
            </div>
            {% elif loop.index % 2 == 0 %}
            <div class="pull-quote">
              В простых вещах скрывается невероятная красота
            </div>
            {% endif %}
          </div>
          <div class="page-number left">{{ (loop.index0 * 2) + 4 }}</div>
          <div class="running-header left">Глава {{ loop.index }}</div>
        </div>

        <!-- Правая страница - Изображение -->
        {% if loop.index % 4 == 0 %}
        <!-- Каждая 4-я картинка на полный экран -->
        <div class="page full-image">
          <div class="page-image-container">
            <img src="{{ page.image }}" alt="{{ page.title | striptags | trim }}" />
          </div>
          <div class="page-number right">{{ (loop.index0 * 2) + 5 }}</div>
        </div>
        {% else %}
        <!-- Обычная страница с изображением -->
        <div class="page page-image">
          <div class="page-image-container">
            <img src="{{ page.image }}" alt="{{ page.title | striptags | trim }}" />
            <div class="image-caption">
              {{ page.caption | safe }}
            </div>
          </div>
          <div class="page-number right">{{ (loop.index0 * 2) + 5 }}</div>
          <div class="running-header right">Глава {{ loop.index }}</div>
        </div>
        {% endif %}
      {% endfor %}
      
      <!-- 6. Эпилог -->
      <div class="page final-page">
        <div class="page-content" style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
          <h1 style="font-family: var(--font-ornamental); font-size: 4em;">Эпилог</h1>
          <p style="font-size: 1.2em; line-height: 1.6; max-width: 85%; margin: 2em auto;">
            Пусть эта книга хранит тепло самых дорогих воспоминаний.
          </p>
        </div>
        <div class="page-number left">{{ (pages|length * 2) + 4 }}</div>
        <div class="running-header left">Эпилог</div>
      </div>

      <!-- 7. Благодарности -->
      <div class="page" style="background: var(--page-bg);">
        <div class="page-content" style="text-align: center;">
          <h2 style="font-family: var(--font-ornamental); font-size: 3em;">{{ gratitude_title }}</h2>
          <p style="margin-top: 2em;">Всем, кто был частью этой истории.</p>
          <p style="margin-top: 5em; font-size: 0.9em; color: var(--meta-text-color);">© 2024 | {{ book_subtitle }}</p>
        </div>
        <div class="page-number right">{{ (pages|length * 2) + 5 }}</div>
        <div class="running-header right">{{ gratitude_title }}</div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/page-flip@2.0.7/dist/js/page-flip.browser.js"></script>
  <script>
    // Ждем полной загрузки страницы И библиотеки
    function initializeBook() {
      const book = document.getElementById('book');
      if (!book) {
        console.error("Элемент #book не найден!");
        return;
      }
      
      // Проверяем, что библиотека загружена
      if (typeof StPageFlip === 'undefined') {
        console.log("StPageFlip еще не загружен, ждем...");
        setTimeout(initializeBook, 100); // Повторяем через 100мс
        return;
      }
      
      console.log("✅ Инициализируем книгу...");
      
      const pageFlip = new StPageFlip.PageFlip(book, {
        width: 500,
        height: 650,
        showCover: true,
        mobileScrollSupport: true,
        usePortrait: true,
        flippingTime: 1000,
        useMouseEvents: true,
        swipeDistance: 50,
        clickEventForward: false,
        maxShadowOpacity: 0.3,
        drawShadow: true
      });
      
      pageFlip.loadFromHTML(document.querySelectorAll('.page'));
      
      // Принудительно применяем стили после инициализации
      setTimeout(() => {
        const allPages = document.querySelectorAll('.stf__item, .stf__page, [data-page], .page');
        allPages.forEach(page => {
          page.style.background = 'linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%)';
          page.style.setProperty('background', 'linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%)', 'important');
        });
        console.log("🎨 Стили принудительно применены к", allPages.length, "страницам");
      }, 500);
      
      pageFlip.on('flip', (e) => {
        const pageElement = e.object.getPage(e.data).getElement();
        if (pageElement) {
          // Применяем стили к текущей странице
          pageElement.style.background = 'linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%)';
          pageElement.style.setProperty('background', 'linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%)', 'important');
          
          const contentElements = pageElement.querySelectorAll('.page-content > *');
        contentElements.forEach(el => {
            el.style.animation = 'none';
            setTimeout(() => { el.style.animation = ''; }, 10);
          });
        }
        });

      console.log("✅ Книга успешно инициализирована!");
    }

    // Запускаем инициализацию когда DOM готов
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initializeBook);
    } else {
      // DOM уже готов
      initializeBook();
    }
  </script>
</body>
</html> 